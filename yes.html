<!DOCTYPE html>
<html>
<head>

<title>Happy Rose Day ðŸŒ¹</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>

body{
    margin:0;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:80px 20px;
    background:linear-gradient(135deg,#ffe6eb,#ffd6e0,#fff0f5);
    font-family:'Poppins', sans-serif;
    overflow-x:hidden;
}

/* Floating Hearts */

.hearts{
    position:fixed;
    inset:0;
    pointer-events:none;
}

.hearts span{
    position:absolute;
    bottom:-20px;
    opacity:0.08;
    animation:floatUp linear infinite;
}

@keyframes floatUp{
    to{ transform:translateY(-120vh); }
}

/* Card */

.card{
    background:rgba(255,255,255,0.75);
    backdrop-filter:blur(14px);
    padding:45px;
    border-radius:22px;
    box-shadow:0 12px 45px rgba(255,0,90,0.18);
    max-width:520px;
    width:100%;
    text-align:center;
}

.next-btn{
    margin-top:28px;
    padding:14px 26px;
    border:none;
    border-radius:12px;
    background:linear-gradient(135deg,#ff4d88,#ff7aa2);
    color:white;
    cursor:pointer;
}

</style>

</head>

<body>

<!-- âœ… SINGLE GLOBAL MUSIC PLAYER -->
<audio id="bgMusic" loop>
    <source src="assets/music.mp3" type="audio/mpeg">
</audio>


<div class="hearts"></div>

<div class="card">

<h1 id="title"></h1>

<p>
Every song in this playlist carries a piece of how I feel about you.
</p>

<iframe 
src="https://open.spotify.com/embed/playlist/2PfBKqiyh6cIOPDNg1f1e0"
width="100%" 
height="300"
style="border-radius:12px"
allow="autoplay; encrypted-media">
</iframe>

<button class="next-btn" onclick="goToLetter()">
Open Your Rose Letter ðŸ’Œ
</button>

</div>


<script>

/* FLOATING HEARTS */

const hearts=document.querySelector(".hearts");

for(let i=0;i<10;i++){
    const h=document.createElement("span");
    h.innerHTML="â¤ï¸";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=(Math.random()*12+12)+"px";
    h.style.animationDuration=(Math.random()*7+7)+"s";
    hearts.appendChild(h);
}


/* DYNAMIC NAME */

const params=new URLSearchParams(window.location.search);
const name=params.get('name')||"Harshita";

document.getElementById("title").innerText=
`Happy Rose Day, ${name} ðŸŒ¹`;


/* â­ GLOBAL MUSIC SYSTEM */

const music=document.getElementById("bgMusic");

// restore time
const savedTime=localStorage.getItem("musicTime");

if(savedTime){
    music.currentTime=savedTime;
}

// resume if already started
if(localStorage.getItem("musicStarted")==="true"){
    music.volume=0.20;
    music.play().catch(()=>{});
}

// save position
setInterval(()=>{
    localStorage.setItem("musicTime",music.currentTime);
},1000);


// start music on button click
function startMusic(){

    music.volume=0.20;
    music.play();

    localStorage.setItem("musicStarted","true");
}



/* NAVIGATION */

function goToLetter(){

    startMusic();

    document.body.style.opacity="0";

    setTimeout(()=>{
        window.location.href=
        `letter.html?name=${name}`;
    },500);
}

</script>

</body>
</html>
